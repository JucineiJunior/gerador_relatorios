{% extends 'base.html' %}
{% block content %}

<div class="container">
  <h2>Buscar Relatórios</h2>

  <form method="get" class="form-busca">
    <div>
      <label for="campo">Buscar por:</label>
      <select name="campo" id="campo">
        <option value="nome" {% if campo == 'nome' %}selected{% endif %}>Nome</option>
        <option value="setor" {% if campo == 'setor' %}selected{% endif %}>Setor</option>
      </select>
    </div>

    <div>
      <label for="termo">Termo:</label>
      <input type="text" name="termo" id="termo" value="{{ termo }}">
    </div>

    <button type="submit">Buscar</button>
  </form>

  <hr>

  {% if resultados %}
    <h3>Resultados:</h3>
    <ul>
      {% for r in resultados %}
        <li>
          <strong>{{ r.nome }}</strong> (Setor: {{ r.setor.nome }})
          - <a href="{% url 'editar_relatorio' r.id %}">Editar</a>
          - <a href="{% url 'configurar_relatorio' r.id %}">Configurar</a>
        </li>
      {% endfor %}
    </ul>
  {% elif termo %}
    <p>Nenhum relatório encontrado.</p>
  {% endif %}
</div>

{% endblock %}
